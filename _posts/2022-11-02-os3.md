---
layout : single
title:  "[운영체제 스터디]3장-컴퓨터 시스템의 동작 원리"
last_modified_at : 2022-11-02
categories: os
toc: true
toc_sticky: true
---

## 1. 컴퓨터 시스템의 구조

![image](https://user-images.githubusercontent.com/80660585/193441848-02562f5d-038f-400a-9da5-357d3f07f707.png)  

- 컴퓨터 시스템 구조 = 내부장치(CPU, 메모리) + 외부장치(디스크, 키보드, 마우스, 모니터, 네트워크)

- 컨트롤러 : 일종의 작은 CPU로 메모리 및 입출력장치 등 각 하드웨어 장치에 붙어있으면서 이들을 제어한다.  

- 어떤 프로그램이 수행되려면 그 프로그램은 **메모리**에 올라가 있어야 한다.  
운영체제 중 항상 메모리에 올라가 있는 부분을 **커널**(전체 운영체제 중 핵심적인 부분) 이라고 한다.  

## 2. CPU연산과 I/O 연산

- 입출력 장치들의 I/O연산 : 입출력 컨트롤러가 담당

- 컴퓨터 내에서 수행되는 연산 : 메인 CPU가 담당  

👉 입출력 장치와 메인 CPU는 동시에 수행이 가능하다.


- 로컬버퍼 : **컨트롤러가** 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위해 **가지고 있는 작은 메모리**

- 인터럽트 : 컨트롤러들이 CPU의 서비스가 필요할 때 이를 통보하는 방법

👉 **로컬버퍼**로 읽어오는 작업이 끝나면 **컨트롤러**는 **인터럽트**를 발생시켜 **CPU**에게 보고하게 된다.  

## 3. 인터럽트의 일반적 기능

운영체제 커널에는 인터럽트가 들어왔을 때 해야 할 일이 미리 다 프로그래밍 되어 그 코드가 보관돼 있다.  

- 인터럽트 벡터 : 해당 인터럽트 처리 루틴의 주소를 가지고 있음
- 인터럽트 처리 루틴(=인터럽트 핸들러) : 다양한 인터럽트에 대해 각각 처리해야 할 업무들을 정의하고 있는 커널함수

- 하드웨어 인터럽트 : 일반적으로 말하는 인터럽트, 하드웨어가 발생시킨 인터럽트
- 소프트웨어 인터럽트(Trap) 
    - Exception : 프로그램이 오류를 범한 경우
    - System call : 프로그램이 커널함수를 호출하는 경우

## 4. 인터럽트 핸들링
인터럽트가 발생한 경우에 처리해야 할 일의 절차를 의미

- 레지스터 : CPU에서 명령이 실행 될 때 **데이터를 읽거나 쓰면서** 사용되는 **CPU내부의 임시기억 장치**

- PCB(Process Control Block) : PCB는 각각의 프로그램마다 하나씩 존재하며 해당 프로그램의 어느 부분이 실행 중이었는지 저장하고 있음  (메모리 주소, 레지스터값, 하드웨어 상태 등)

> PCB가 필요한 이유 : 인터럽트가 발생해 새로운 명령을 실행하면 기존 레지스터값들이 지워지게 되므로 이들을 기억하기 위해 사용

## 5. 입출력 구조

### 동기식 입출력과 비동기식 입출력 (두 경우 모두 I/O의 완료는 인터럽트로 알려줌)

- 동기식 입출력  
:I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어감
    - 구현방법 1  
    :I/O가 끝날 때까지 CPU를 낭비시킴  
    :매시점 하나의 I/O만 일어날 수 있음

    - 구현방법 2  
    :I/O가 완료될 때 까지 해당 프로그램에게서 CPU를 빼앗음  
    :I/O 처리를 기다리는 줄에 그 프로그램을 줄 세움  
    :다른 프로그램에게 CPU를 줌  

- 비동기식 입출력  
:I/O가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감












 